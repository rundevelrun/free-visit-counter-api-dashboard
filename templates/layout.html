
<!DOCTYPE html>
<html lang="{{ g.get('lang_code', 'en') }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ _('Visitor Counter') }}{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    {% block head_extra %}{% endblock %}

<script>
function toggleTheme() {
  const html = document.documentElement;
  html.classList.toggle('dark');
  localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
}
window.addEventListener('DOMContentLoaded', () => {
  if (localStorage.getItem('theme') === 'dark') {
    document.documentElement.classList.add('dark');
  }
});
</script>
</head>

<body>
    <!-- Common Header -->
    <header class="site-header">
        <div class="container">
            <div class="logo">
                <a href="{{ url_for('index') }}">
                    <i class="fas fa-chart-line"></i>
                    <span>{{ _('Visitor Counter') }}</span>
                </a>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="{{ url_for('index') }}">{{ _('Home') }}</a></li>
                    <li><a href="{{ url_for('api_docs') }}">{{ _('API Docs') }}</a></li>
                    <li><a href="{{ url_for('login') }}">{{ _('Dashboard') }}</a></li>
                </ul>
            </nav>
            <div class="language-selector">
                <select id="language-select" onchange="changeLanguage(this.value)">
                    <option value="en" {% if g.get('lang_code') == 'en' %}selected{% endif %}>English</option>
                    <option value="ko" {% if g.get('lang_code') == 'ko' %}selected{% endif %}>한국어</option>
                    <option value="ja" {% if g.get('lang_code') == 'ja' %}selected{% endif %}>日本語</option>
                </select>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            {% block content %}{% endblock %}
        </div>
    </main>

    <!-- Common Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="fas fa-chart-line"></i>
                    <span>{{ _('Visitor Counter') }}</span>
                </div>
                <div class="footer-links">
                    <ul>
                        <li><a href="{{ url_for('index') }}">{{ _('Home') }}</a></li>
                        <li><a href="{{ url_for('api_docs') }}">{{ _('API Docs') }}</a></li>
                        <li><a href="{{ url_for('login') }}">{{ _('Dashboard') }}</a></li>
                    </ul>
                </div>
                <div class="footer-social">
                    <a href="#" target="_blank"><i class="fab fa-github"></i></a>
                    <a href="#" target="_blank"><i class="fab fa-twitter"></i></a>
                    <a href="#" target="_blank"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; {{ now('utc', '%Y') }} {{ _('Visitor Counter. All rights reserved.') }}</p>
            </div>
        </div>
    </footer>

    <!-- Common Scripts -->
    <script>
        function changeLanguage(lang) {
            const currentUrl = new URL(window.location.href);
            currentUrl.searchParams.set('lang', lang);
            window.location.href = currentUrl.toString();
        }

        // Toggle mobile menu
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuToggle = document.createElement('button');
            mobileMenuToggle.className = 'mobile-menu-toggle';
            mobileMenuToggle.innerHTML = '<i class="fas fa-bars"></i>';

            const nav = document.querySelector('.main-nav');
            const header = document.querySelector('.site-header .container');

            header.insertBefore(mobileMenuToggle, nav);

            mobileMenuToggle.addEventListener('click', function() {
                nav.classList.toggle('active');
                this.classList.toggle('active');

                if (this.classList.contains('active')) {
                    this.innerHTML = '<i class="fas fa-times"></i>';
                } else {
                    this.innerHTML = '<i class="fas fa-bars"></i>';
                }
            });
        });
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>

